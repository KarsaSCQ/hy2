port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: :9090

dns:
  enable: true
  cache-algorithm: arc
  prefer-h3: false
  use-hosts: true
  use-system-hosts: true
  listen: 0.0.0.0:1053
  ipv6: false
  default-nameserver:
    - 223.5.5.5
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - '*.lan'
  nameserver-policy:
    '+.arpa': '10.0.0.1'
  nameserver:
    - system
  fallback:
    - tls://8.8.4.4
    - tls://1.1.1.1
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'
      - '+.twitter.com'
      - '+.telegram.org'


geodata-mode: true
geox-url:
  geosite: "https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geosite.dat"
  geoip: "https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geoip.dat"
  mmdb: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-only-cn-private.mmdb"
geo-auto-update: true
geo-update-interval: 24


proxies:
  - {type: hysteria2,name: hy2, server: 107.172.5.56, port: 443, client-fingerprint: chrome,   password: kirkir.top,   sni: 7533666.top,   skip-cert-verify: true, udp: true, }

  - {type: vless, name: "🇸🇬SG1-B", server: 46.3.109.215, port: 5320, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /hiosedhfiosfiosdhiofhsdiofhisdofhsd, headers: {Host: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇸🇬SG2-B", server: 45.78.23.191, port: 20004, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /hiosedhfiosfiosdhiofhsdiofhisdofhsd, headers: {Host: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇸🇬SG3-B", server: 46.3.104.106, port: 55131, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /hiosedhfiosfiosdhiofhsdiofhisdofhsd, headers: {Host: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇸🇬SG4-B", server: 46.3.104.7, port: 60565, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /hiosedhfiosfiosdhiofhsdiofhisdofhsd, headers: {Host: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇸🇬SG5-B", server: 46.3.104.159, port: 25980, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /hiosedhfiosfiosdhiofhsdiofhisdofhsd, headers: {Host: sgsgsgsgsg.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇺🇸US1-C", server: 104.194.64.17, port: 15745, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: ususususus.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /sdiohfiosdhfuiosghfuhse, headers: {Host: ususususus.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇺🇸US2-C", server: 154.17.10.111, port: 46146, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: ususususus.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /sdiohfiosdhfuiosghfuhse, headers: {Host: ususususus.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇺🇸US3-C", server: 154.17.10.113, port: 12266, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: ususususus.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /sdiohfiosdhfuiosghfuhse, headers: {Host: ususususus.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇺🇸US4-C", server: 154.17.22.88, port: 31861, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: ususususus.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /sdiohfiosdhfuiosghfuhse, headers: {Host: ususususus.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇺🇸US5-C", server: 154.17.11.22, port: 19050, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: ususususus.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /sdiohfiosdhfuiosghfuhse, headers: {Host: ususususus.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇵🇱PL1-A", server: 154.17.8.47, port: 54362, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /uesfuttttttt, headers: {Host: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇵🇱PL2-A", server: 154.17.231.175, port: 56666, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /uesfuttttttt, headers: {Host: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇵🇱PL3-A", server: 154.17.10.111, port: 47051, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /uesfuttttttt, headers: {Host: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇵🇱PL4-A", server: 154.17.2.22, port: 23232, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /uesfuttttttt, headers: {Host: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}
  - {type: vless, name: "🇵🇱PL5-A", server: 154.17.22.167, port: 23656, udp: true, uuid: 3dad11ee-d5b6-4915-b3eb-9be0d7a3462a, packet-encoding: xudp, tls: true, servername: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz, client-fingerprint: chrome, skip-cert-verify: false, network: ws, ws-opts: {path: /uesfuttttttt, headers: {Host: iuhsdofsdfsdfsdfsdfsdf.eessgrgrgrgr.cloudns.nz}, v2ray-http-upgrade: true, v2ray-http-upgrade-fast-open: true}, tfo: true, mptcp: true, smux: {enabled: true, protocol: h2mux, max-streams: 10, padding: true}}

  - {type: hysteria2, name: "Hysteria2-菲律宾", server: 203.174.82.145, port: 43057, password: eb75320e-a6d0-4b34-a6b6-2bcfc96a9099, sni: www.bing.com, alpn: [h3], skip-cert-verify: true}
  - {type: hysteria2, name: "Hysteria2-新加坡", server: 192.229.85.46, port: 57238, password: c5cf6677-50f7-4fd2-abbc-c73f4cf7cfff, sni: www.bing.com, alpn: [h3], skip-cert-verify: true}
  - {type: vless, name: "VLESS-美国-2", server: kuzing.zabc.net, port: 40287, uuid: 675b7a12-a013-4d5b-9607-1211abaf7421, network: tcp, tls: true, flow: xtls-rprx-vision, client-fingerprint: chrome, servername: yahoo.com, reality-opts: {public-key: g3tlfCGYOga5YAm5N9gqNbnY6uuXnmWt5P_tLbFhywY, short-id: 3dc0c68f}}
  - {type: trojan, name: "Trojan-美国", server: kuzing.zabc.net, port: 33003, password: xxTiKFswGB, sni: kuzing.zabc.net, tls: true, alpn: [h3, h2, http/1.1]}
  - {type: hysteria2, name: "Hysteria-AWS-美国", server: hy2.everytalk.dpdns.org, port: 443, password: lkz20040702, sni: hy2.everytalk.dpdns.org, skip-cert-verify: false}
  - {type: hysteria2, name: "Hysteria2-新加坡-修复", server: kkk9.zabc.net, port: 443, password: lkz20040702, sni: kkk9.zabc.net, masquerade: https://bing.com}
  - {type: trojan, name: "Trojan-美国-2", server: luuu71.dpdns.org, port: 12433, password: ok8r9vycfv, sni: luuu71.dpdns.org, tls: true, alpn: [h3, h2, http/1.1], client-fingerprint: chrome}
  - {type: vmess, name: "VMess-美国-2", server: luuu71.dpdns.org, port: 47471, uuid: b31b4a1d-f1f0-4d61-8e41-71460799d343, alterId: 0, cipher: auto, network: tcp, tls: true, servername: luuu71.dpdns.org, client-fingerprint: chrome, alpn: [h3, h2, http/1.1]}
  - {type: vmess, name: "VMess-美国-3", server: kuzing.zabc.net, port: 49038, uuid: 7f498d59-de4d-41d8-80ac-b42e08db4afa, alterId: 0, cipher: auto, network: tcp, tls: true, servername: kuzing.zabc.net, client-fingerprint: chrome, alpn: [h3, h2, http/1.1]}
  - {type: hysteria2, name: "Hysteria2-美国-新", server: anyaitotalked.zabc.net, port: 443, password: lkz20040702, sni: anyaitotalked.zabc.net, skip-cert-verify: false}
  - {type: vless, name: "VLESS-美国-4", server: luuu71.dpdns.org, port: 59614, uuid: 81da6bd0-1af3-4ef8-bf3c-17673e848c91, network: tcp, tls: true, servername: yahoo.com, client-fingerprint: chrome, reality-opts: {public-key: HbmJ7usHO-qATw9vKjCUgvaCBmoDk9gbF6h3FfL0YnI, short-id: 557afc857889bb}}
  - {type: vless, name: "Reality-jmq31raw", server: 192.227.148.11, port: 443, uuid: 5da24f04-f019-44e5-858b-4100584c4a6c, network: tcp, tls: true, reality-opts: {public-key: c-nyXJtwqn-sCL_ZBE87uyQV8lMdnwbJJx5Xftsydn4, short-id: 976e3a4f7baf87}, servername: 5da24f04.com, client-fingerprint: chrome}

proxy-groups:
  - name: Manual
    type: select
    proxies:
      - Fastest
      - Speed
      - hy2
      - 🇸🇬SG1-B
      - 🇸🇬SG2-B
      - 🇸🇬SG3-B
      - 🇸🇬SG4-B
      - 🇸🇬SG5-B
      - 🇺🇸US1-C
      - 🇺🇸US2-C
      - 🇺🇸US3-C
      - 🇺🇸US4-C
      - 🇺🇸US5-C
      - 🇵🇱PL1-A
      - 🇵🇱PL2-A
      - 🇵🇱PL3-A
      - 🇵🇱PL4-A
      - 🇵🇱PL5-A

        
      - Hysteria2-菲律宾
      - Hysteria2-新加坡
      - VLESS-美国-2
      - Trojan-美国
      - Hysteria-AWS-美国
      - Hysteria2-新加坡-修复
      - Trojan-美国-2
      - VMess-美国-2
      - VMess-美国-3
      - Hysteria2-美国-新
      - VLESS-美国-4
      - Reality-jmq31raw
      

  # - name: Japan
  #   type: url-test
  #   url: http://www.gstatic.com/generate_204
  #   interval: 300
  #   proxies:

  # - name: Taiwan
  #   type: url-test
  #   url: http://www.gstatic.com/generate_204
  #   interval: 300
  #   proxies:

  - name: Fastest
    type: url-test
    proxies:
      - 🇸🇬SG1-B
      - 🇸🇬SG2-B
      - 🇸🇬SG3-B
      - 🇸🇬SG4-B
      - 🇸🇬SG5-B
      - 🇺🇸US1-C
      - 🇺🇸US2-C
      - 🇺🇸US3-C
      - 🇺🇸US4-C
      - 🇺🇸US5-C
      - 🇵🇱PL1-A
      - 🇵🇱PL2-A
      - 🇵🇱PL3-A
      - 🇵🇱PL4-A
      - 🇵🇱PL5-A

    url: http://www.gstatic.com/generate_204
    interval: 300

  - name: Speed
    type: url-test
    proxies:
    - Hysteria2-菲律宾
    - Hysteria2-新加坡
    - VLESS-美国-2
    - Trojan-美国
    - Hysteria-AWS-美国
    - Hysteria2-新加坡-修复
    - Trojan-美国-2
    - VMess-美国-2
    - VMess-美国-3
    - Hysteria2-美国-新
    - VLESS-美国-4
    - Reality-jmq31raw

    
    url: http://www.gstatic.com/generate_204
    interval: 300

  - name: Fallback
    type: fallback
    proxies:
     - hy2
     - Speed
     - Fastest


rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400


  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400

  # 照葫芦画瓢
  GoogleFCM_No_Resolve:
    type: http
    behavior: classical
    url: "https://github.com/blackmatrix7/ios_rule_script/raw/refs/heads/master/rule/Clash/GoogleFCM/GoogleFCM_No_Resolve.yaml"
    path: ./ruleset/GoogleFCM_No_Resolve.yaml
    interval: 86400


rules:

# 2. 中国大陆IP直连
- GEOIP,CN,DIRECT

# 3. 中国大陆域名直连
- GEOSITE,CN,DIRECT

# 4. 自定义规则直连
#- DOMAIN-SUFFIX,fishhawk.top,DIRECT
- DOMAIN-SUFFIX,warhut.cn,DIRECT
- DOMAIN-SUFFIX,cycanime.com,DIRECT
- DOMAIN-SUFFIX,8xsk.com,DIRECT
- DOMAIN-SUFFIX,steamdb.info,DIRECT
- DOMAIN,clash.razord.top,DIRECT
- DOMAIN,yacd.haishan.me,DIRECT
- DOMAIN-SUFFIX,steamcontent.com,DIRECT

# 5. 系统/应用直连
- RULE-SET,direct,DIRECT
- RULE-SET,applications,DIRECT
- RULE-SET,GoogleFCM_No_Resolve,DIRECT

# 6. 私有IP和局域网段直连
- RULE-SET,private,DIRECT
- RULE-SET,cncidr,DIRECT

# 7. 拒绝广告
- RULE-SET,reject,REJECT

# 8.  非直连
# 一般
- DOMAIN-SUFFIX,manhuagui.com,Manual
- DOMAIN-SUFFIX,mhgui.com,Manual
- DOMAIN-SUFFIX,hamreus.com,Manual
- DOMAIN-SUFFIX,youtube-nocookie.com,Manual
- DOMAIN-SUFFIX,googlevideo.com,Manual


# 日系
# - DOMAIN-SUFFIX,dlsite.com,Japan
# - DOMAIN-SUFFIX,dmm.com,Japan
#谷歌ai
- DOMAIN-SUFFIX,gemini.google.com,Manual
- DOMAIN-SUFFIX,clients6.google.com,Manual
# - DOMAIN-SUFFIX,aistudio.google.com,Manual

# 9. 兜底：全走代理
- MATCH,Fallback
